<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/sideBar.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="{{ url_for('static', filename='js/sideBar.js') }}" defer></script>
  <title>Home</title>

  <style>
    /* モーダルのスタイル */
    .modal {
      display: none; /* デフォルトでは非表示 */
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.4);
    }

    .modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      max-width: 400px;
      position: relative;
    }

    .close {
      color: #aaa;
      position: absolute;
      right: 10px;
      top: 10px;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div id="menuSideBar"></div>
<div id="main">
    {% if usr is not none and usr != '' %}
  <!-- ログイン状態の場合の表示 -->
  <button onclick="window.location.href='/logout'" class="login">ログアウト</button>
  <div class="title2">
    <div class="circle-icon">
      <img src="{{ url_for('static', filename='image/Gemini_Generated_Image_jp4tuxjp4tuxjp4t 3.jpeg') }}" alt="画像1">
    </div>
    <h1 class="head">V E N U S</h1>
  </div>

  <div class="input">
    <form action="/search" method="GET">
      <input type="text" name="query" class="text" placeholder="施術・クリニック・ドクター名を入力">
      <button type="submit" class="search">検索</button>
    </form>
  </div>

  <h2 class="subtitle1">人気の施術</h2>
  <ul class="image-list">
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/eye.png') }}" alt="二重" class="image">
      <span class="description"><strong>二重</strong><br>理想の二重でメイク時短♪</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/eye_cry.png') }}" alt="涙袋" class="image">
      <span class="description"><strong>涙袋</strong><br>ぷっくり可愛い目元に♡</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/hada.png') }}" alt="毛穴" class="image">
      <span class="description"><strong>毛穴</strong><br>黒ずみ・ぽっかり開き毛穴に</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/mouse.png') }}" alt="口元" class="image">
      <span class="description"><strong>口元</strong><br>長年の悩みからの解放！</span>
    </li>
  </ul>

  <ul class="image-list">
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/nose.png') }}" alt="小鼻" class="image">
      <span class="description"><strong>小鼻</strong><br>大きさ・張り出しを解消！</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/stomach.png') }}" alt="痩身(上半身)" class="image">
      <span class="description"><strong>痩身(上半身)</strong><br>華奢な二の腕・くびれ！</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/teeth.png') }}" alt="白い歯" class="image">
      <span class="description"><strong>白い歯</strong><br>笑顔が映えて清潔感アップ！</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/yokogao.png') }}" alt="横顔" class="image">
      <span class="description"><strong>横顔</strong><br>どの角度も綺麗に盛れる</span>
    </li>
  </ul>
</div>
{% else %}
  <!-- ログアウト状態の場合の表示 -->
  <button onclick="window.location.href='/login'" class="login">ログイン</button>
{% endif %}
    
  {% if not usr%}
  <div class="title2">
    <div class="circle-icon">
      <img src="{{ url_for('static', filename='image/Gemini_Generated_Image_jp4tuxjp4tuxjp4t 3.jpeg') }}" alt="画像1">
    </div>
    <h1 class="head">V E N U S</h1>
  </div>

  <div class="input">
    <form action="/search" method="GET">
      <input type="text" name="query" class="text" placeholder="施術・クリニック・ドクター名を入力">
      <button type="submit" class="search">検索</button>
    </form>
  </div>

  <h2 class="subtitle1">人気の施術</h2>
  <ul class="image-list">
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/eye.png') }}" alt="二重" class="image">
      <span class="description"><strong>二重</strong><br>理想の二重でメイク時短♪</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/eye_cry.png') }}" alt="涙袋" class="image">
      <span class="description"><strong>涙袋</strong><br>ぷっくり可愛い目元に♡</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/hada.png') }}" alt="毛穴" class="image">
      <span class="description"><strong>毛穴</strong><br>黒ずみ・ぽっかり開き毛穴に</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/mouse.png') }}" alt="口元" class="image">
      <span class="description"><strong>口元</strong><br>長年の悩みからの解放！</span>
    </li>
  </ul>

  <ul class="image-list">
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/nose.png') }}" alt="小鼻" class="image">
      <span class="description"><strong>小鼻</strong><br>大きさ・張り出しを解消！</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/stomach.png') }}" alt="痩身(上半身)" class="image">
      <span class="description"><strong>痩身(上半身)</strong><br>華奢な二の腕・くびれ！</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/teeth.png') }}" alt="白い歯" class="image">
      <span class="description"><strong>白い歯</strong><br>笑顔が映えて清潔感アップ！</span>
    </li>
    <li class="image-item">
      <img src="{{ url_for('static', filename='image/yokogao.png') }}" alt="横顔" class="image">
      <span class="description"><strong>横顔</strong><br>どの角度も綺麗に盛れる</span>
    </li>
  </ul>
</div>
{% endif %}

<!-- モーダルウィンドウのHTML -->
<div id="authModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h2 id="modalTitle">ログイン</h2>
      <div id="authForm">
        <!-- フォーム内容がここに挿入されます -->
      </div>
    </div>
  </div>
  
  <script>
    function openModal(mode) {
    document.getElementById('authModal').style.display = 'block';
    const modalTitle = document.getElementById('modalTitle');
    const authForm = document.getElementById('authForm');
    if (mode === 'login') {
      modalTitle.innerText = 'ログイン';
      authForm.innerHTML = `
        <p>ログインするには以下のボタンをクリックしてください。</p>
        <button onclick="redirectToCognitoLogin()">ログイン</button>
        <h2 style="color:orangered;" id="msg"></h2>
      `;
    }
  }

  // モーダルを閉じる
  function closeModal() {
    document.getElementById('authModal').style.display = 'none';
    document.getElementById('msg').innerText = '';
  }

  // Cognitoログインページにリダイレクト
  function redirectToCognitoLogin() {
    const cognitoLoginUrl = `
      https://venus.auth.ap-northeast-1.amazoncognito.com/login?
      client_id=7kupl40v4q23san92br093bfro&
      response_type=code&
      scope=email+openid&
      redirect_uri=http://localhost:5004/callback
    `.trim().replace(/\s+/g, '');
    window.location.href = cognitoLoginUrl;

    // 認証後の再読み込み（場合によってはリダイレクト後に実行）
    setTimeout(() => {
        location.reload();
    }, 500);
}

  // モーダル外をクリックしたときに閉じる
  window.onclick = function (event) {
    const modal = document.getElementById('authModal');
    if (event.target == modal) {
      closeModal();
    }
  }
</script>
  </script>
  
  </body>
  </html>
  